"use strict";(self.webpackChunkconfigurator=self.webpackChunkconfigurator||[]).push([[762],{207:(y,f,s)=>{s.d(f,{h:()=>d});var _=s(8645),e=s(9773),a=s(5879),t=s(7065);let d=(()=>{var u;class g{get selected(){return this.currentPin===this.options?.id}constructor(r){this.pinSelectedService=r,this.destroy$=new _.x,this.pinSelectedService.selectObserver.pipe((0,e.R)(this.destroy$)).subscribe(m=>this.currentPin=m)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return(u=g).\u0275fac=function(r){return new(r||u)(a.Y36(t.V))},u.\u0275dir=a.lG2({type:u,selectors:[["","configuratorSelectable","","options",""]],hostVars:2,hostBindings:function(r,m){2&r&&a.ekj("pin-selected",m.selected)},inputs:{options:"options"},standalone:!0}),g})()},3917:(y,f,s)=>{s.d(f,{IO:()=>_});var _={};s.r(_),s.d(_,{adcConfig:()=>O,analogInput:()=>r,analogOutput:()=>g,colorOutput:()=>C,digitalInput:()=>d,digitalOutput:()=>u,ds18b20:()=>P,roter:()=>m,temperatureHumidity:()=>M});var e=s(151),a=s(1274),t=s(998);const d=[{title:$localize`General purpose`,value:"general",type:e.Yi.SensorBinary},{title:$localize`Door/window`,value:"door",type:e.Yi.SensorBinary},{title:$localize`Motion`,value:"motion",type:e.Yi.SensorBinary},{title:$localize`Smoke`,value:"smoke",type:e.Yi.SensorBinary},{title:$localize`Leakage`,value:"leakage",type:e.Yi.SensorBinary},{title:$localize`CO`,value:"CO",type:e.Yi.SensorBinary},{title:$localize`CO2`,value:"CO2",type:e.Yi.SensorBinary},{title:$localize`Heat`,value:"heat",type:e.Yi.SensorBinary},{title:$localize`Freeze`,value:"freeze",type:e.Yi.SensorBinary},{title:$localize`Tamper`,value:"tamper",type:e.Yi.SensorBinary},{title:$localize`Tilt`,value:"tilt",type:e.Yi.SensorBinary},{title:$localize`Glass break`,value:"glassbr",type:e.Yi.SensorBinary}].map(h=>({...h,withType:!0})),u=[{title:$localize`Switch`,value:"switch",type:e.Yi.SwitchBinary},{title:$localize`Door lock`,value:"doorLock",type:e.Yi.SwitchBinary},{title:$localize`Siren`,value:"siren",type:e.Yi.SwitchBinary},{title:$localize`Valve`,value:"valve",type:e.Yi.SwitchBinary},{title:$localize`Heating thermostat`,value:"heatingThermostat",type:e.Yi.Thermostat,additionally:[{title:$localize`Z-Wave temp sensor`,value:"Z-Wave temp sensor"},{title:$localize`DS18B20`,value:"ds18b20",type:e.Yi.DS18B20}]},{title:$localize`Cooling thermostat`,value:"coolingThermostat",type:e.Yi.Thermostat,additionally:[{title:$localize`Z-Wave temp sensor`,value:"Z-Wave temp sensor"},{title:$localize`DS18B20`,value:"ds18b20",type:e.Yi.DS18B20}]}].map(h=>({...h,withType:!0})),g=[{title:$localize`Dimmer`,value:"dimmer",type:e.Yi.SwitchMultilevel},{title:$localize`Red LED`,value:a.J$.Red,type:e.Yi.SwitchColor,group:t.F.Color},{title:$localize`Green LED`,value:a.J$.Green,type:e.Yi.SwitchColor,group:t.F.Color},{title:$localize`Blue LED`,value:a.J$.Blue,type:e.Yi.SwitchColor,group:t.F.Color},{title:$localize`White LED`,value:a.J$.White,type:e.Yi.SwitchColor,group:t.F.Color}],C=[],r=[{title:$localize`Percentages, %`,value:a.s4.Percentage,type:e.Yi.SensorMultilevel},{title:$localize`Temperature, Â°C`,value:a.s4.Temperature,type:e.Yi.SensorMultilevel},{title:$localize`Luminance, lux`,value:a.s4.Luminance,type:e.Yi.SensorMultilevel},{title:$localize`Humidity, %`,value:a.s4.Humidity,type:e.Yi.SensorMultilevel},{title:$localize`Voltage, V`,value:a.s4.Voltage,type:e.Yi.SensorMultilevel},{title:$localize`Current, A`,value:a.s4.Current,type:e.Yi.SensorMultilevel},{title:$localize`Distance, m`,value:a.s4.Distance,type:e.Yi.SensorMultilevel},{title:$localize`Pressure, kPa`,value:a.s4.Pressure,type:e.Yi.SensorMultilevel},{title:$localize`CO2, ppm`,value:a.s4.Ppm,type:e.Yi.SensorMultilevel}],m=h=>[9600,14400,19200,38400,57600,115200,230400].map(v=>({title:$localize`${v} kbps`,value:v,type:h})),O=[{key:"Analog input 0-3 V",title:$localize`Analog input 0-3 V`,options:r,offset:a.jk.V3},{key:"Analog input 0-5 V",title:$localize`Analog input 0-5 V`,options:r,offset:a.jk.V5},{key:"Analog input 0-12 V",title:$localize`Analog input 0-12 V`,options:r,offset:a.jk.V12},{key:"Digital input 0/3 V",title:$localize`Digital input 0/3 V`,withGround:3,options:d},{key:"Digital input 0/5 V",title:$localize`Digital input 0/5 V`,withGround:5,options:d},{key:"Digital input 0/12 V",title:$localize`Digital input 0/12 V`,withGround:12,options:d},{key:"Digital output 0/3 V",title:$localize`Digital output 0/3 V`,options:u}],P=[{key:"Temperature",title:$localize`Temperature`,options:Array.from({length:10}).map((h,v)=>({title:$localize`${v+1} sensor`,value:v+1,type:e.Yi.DS18B20}))}],M=[{key:"temperature-humidity",title:$localize`Temperature/humidity`,options:[{title:$localize`DHT11`,value:"dht11",type:e.Yi.DHT},{title:$localize`DHT22`,value:"dht22",type:e.Yi.DHT}]}]},8084:(y,f,s)=>{s.d(f,{l:()=>Y});var _=s(8645),e=s(9773),a=s(1274),t=s(5879),d=s(4630),u=s(6814),g=s(1175),C=s(2296),r=s(6223),m=s(151),O=s(5683),P=s(8525),M=s(3680);const h=["optionsList",""];function v(n,c){if(1&n&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&n){const l=c.$implicit;t.Q6J("value",l),t.xp6(1),t.Oqu(l.title)}}function D(n,c){if(1&n&&(t.TgZ(0,"mat-form-field",1)(1,"mat-select",7)(2,"mat-option",6),t.SDv(3,8),t.qZA(),t.TgZ(4,"mat-option",6),t.SDv(5,9),t.qZA()()()),2&n){const l=t.oxw();t.xp6(2),t.Q6J("value",l.connectionMode.Normal),t.xp6(2),t.Q6J("value",l.connectionMode.Inverted)}}function S(n,c){if(1&n&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&n){const l=c.$implicit;t.Q6J("value",l.value),t.xp6(1),t.Oqu(l.title)}}function T(n,c){if(1&n&&(t.TgZ(0,"mat-form-field",1)(1,"mat-select",10),t.YNc(2,S,2,2,"mat-option",3),t.qZA()()),2&n){const l=c.ngIf;t.xp6(2),t.Q6J("ngForOf",l)}}function x(n,c){if(1&n&&(t.TgZ(0,"div",11),t._uU(1),t.TgZ(2,"mat-icon"),t._uU(3,"arrow_right_alt"),t.qZA(),t._UZ(4,"input",12),t._uU(5," - "),t._UZ(6,"input",13),t.qZA()),2&n){const l=t.oxw();t.xp6(1),t.hij(" ",l.optionsList.key," ")}}let I=(()=>{var n;class c{constructor(i){this.formBuilder=i,this.changePin=new t.vpe,this.connectionMode=m.jD,this.destroy$=new _.x,this.deviceForm=this.formBuilder.nonNullable.group({list:new r.NI(null),type:new r.NI(null),additionally:new r.NI(null),lowerBound:new r.NI(null),upperBound:new r.NI(null)})}ngOnChanges(i){i.init&&i.init.currentValue?.id&&this.deviceForm.controls.list.patchValue(this.optionsList.options.find(o=>o.value===i.init.currentValue.id)??null,{emitEvent:!1})}ngOnInit(){this.InitForm(),this.deviceForm.valueChanges.pipe((0,e.R)(this.destroy$)).subscribe(i=>{const{list:o,...p}=i;this.changePin.emit({...p,title:o?.title,id:o?.value,deviceType:o?.type,group:o?.group})}),this.init||this.deviceForm.updateValueAndValidity()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}InitForm(){this.deviceForm.controls.list.valueChanges.pipe((0,e.R)(this.destroy$)).subscribe(o=>{this.updateForm(o)});const i=this.optionsList.options.find(({value:o})=>o===this.init?.id);this.deviceForm.controls.list.patchValue(i??this.optionsList.options[0])}updateForm(i){i?.withType?this.deviceForm.controls.type.patchValue(this.init?.type??m.jD.Normal,{emitEvent:!1}):this.deviceForm.controls.type.reset(void 0,{emitEvent:!1}),i?.additionally?this.deviceForm.controls.additionally.patchValue(this.init?.additionally??i.additionally[0].value,{emitEvent:!1}):this.deviceForm.controls.additionally.reset(void 0,{emitEvent:!1}),this.optionsList.offset&&(this.deviceForm.controls.lowerBound.patchValue(this.init?.lowerBound??0,{emitEvent:!1}),this.deviceForm.controls.upperBound.patchValue(this.init?.upperBound??99,{emitEvent:!1}))}}return(n=c).\u0275fac=function(i){return new(i||n)(t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["configurator-child-pin-configurator","optionsList",""]],inputs:{optionsList:"optionsList",init:"init"},outputs:{changePin:"changePin"},features:[t.TTD],attrs:h,decls:7,vars:5,consts:function(){let l,i;return l=$localize`Normal`,i=$localize`Inverted`,[[1,"child-pin",3,"formGroup"],["appearance","fill",1,"select"],["formControlName","list","panelClass","select__item",1,"select__display"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill","class","select",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"value"],["formControlName","type","panelClass","select__item",1,"select__display"],l,i,["formControlName","additionally","panelClass","select__item",1,"select__display"],[1,"inputs"],["formControlName","lowerBound","maxlength","2","type","number",1,"short",2,"text-align","right"],["type","number","formControlName","upperBound","maxlength","2",1,"short"]]},template:function(i,o){1&i&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2),t.YNc(3,v,2,2,"mat-option",3),t.qZA()(),t.YNc(4,D,6,2,"mat-form-field",4),t.YNc(5,T,3,1,"mat-form-field",4),t.YNc(6,x,7,1,"div",5),t.qZA()),2&i&&(t.Q6J("formGroup",o.deviceForm),t.xp6(3),t.Q6J("ngForOf",o.optionsList.options),t.xp6(1),t.Q6J("ngIf",null==o.deviceForm.controls.list.value?null:o.deviceForm.controls.list.value.withType),t.xp6(1),t.Q6J("ngIf",null==o.deviceForm.controls.list.value?null:o.deviceForm.controls.list.value.additionally),t.xp6(1),t.Q6J("ngIf",o.optionsList.offset))},dependencies:[u.sg,u.O5,g.Hw,O.KE,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.nD,r.sg,r.u,P.gD,M.ey],styles:["[_nghost-%COMP%]   .child-pin[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]     .mat-mdc-form-field-infix{padding-bottom:5px!important;padding-top:5px!important;min-height:0!important}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{height:8px}[_nghost-%COMP%]   .short[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif;border:none;width:2ch;font-size:16px;-moz-appearance:textfield;outline:none}[_nghost-%COMP%]   .short[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_nghost-%COMP%]   .short[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;align-items:center}"],changeDetection:0}),c})();const w=["pinList",""];function A(n,c){if(1&n){const l=t.EpF();t.TgZ(0,"mat-icon",8),t.NdJ("click",function(){t.CHM(l);const o=t.oxw();return t.KtG(o.remove())}),t._uU(1,"chevron_left"),t.qZA()}2&n&&t.Udp("cursor","pointer")}function z(n,c){if(1&n&&(t.TgZ(0,"div",9),t._uU(1),t.qZA()),2&n){const l=t.oxw();t.xp6(1),t.hij(" ",l.selected.title," ")}}function E(n,c){if(1&n){const l=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){const p=t.CHM(l).$implicit,$=t.oxw(2);return t.KtG($.selected=p)}),t.TgZ(1,"div",13)(2,"div",14),t._uU(3),t.qZA(),t.TgZ(4,"div",15)(5,"mat-icon",16),t._uU(6,"chevron_right"),t.qZA(),t.TgZ(7,"mat-icon",17),t._uU(8,"chevron_right"),t.qZA()()()()}if(2&n){const l=c.$implicit;t.xp6(3),t.hij(" ",l.title," ")}}function N(n,c){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,E,9,1,"button",11),t.qZA()),2&n){const l=t.oxw();t.xp6(1),t.Q6J("ngForOf",l.options.pin)}}function F(n,c){if(1&n){const l=t.EpF();t.TgZ(0,"div",18)(1,"configurator-child-pin-configurator",19),t.NdJ("changePin",function(o){t.CHM(l);const p=t.oxw();return t.KtG(p.changePin(o))}),t.qZA()()}if(2&n){const l=t.oxw();t.xp6(1),t.Q6J("optionsList",l.selected)("init",l.init)}}let Y=(()=>{var n;class c{set options(i){const o=i.pin.map(p=>{if(p.withGround){const $=p.options.map(L=>({...L,additionally:[{title:`${p.withGround} `+$localize`V or ground`,value:p.withGround??-1},{title:$localize`Free or ground`,value:a.ny.Free}]}));return{...p,options:$}}return p});this._options={...i,pin:o},this.setDevice(this.pinsStateService.snapshot)}get options(){return this._options}constructor(i,o){this.pinsStateService=i,this.changeDetectorRef=o,this.destroyed$=new _.x,this.shadow=!0}ngOnInit(){this.pinsStateService.state$.pipe((0,e.R)(this.destroyed$)).subscribe(i=>{this.setDevice(i)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}changePin(i){this.pinsStateService.patch({id:this.options.id,key:this.selected?.key,device:i,offset:this.selected?.offset,group:this.selected?.group},this.pinList)}remove(){this.pinsStateService.patch({id:this.options.id,device:{...this.pinsStateService.snapshot.find(({id:i})=>i===this.options.id)?.device??{},remove:!0},group:this.selected?.group},this.pinList),this.selected=void 0}setDevice(i){const o=i.find(({id:p})=>p===this.options.id);this.selected=this.options.pin.find(({key:p})=>o?.key===p),this.init=o?.device,this.changeDetectorRef.detectChanges()}}return(n=c).\u0275fac=function(i){return new(i||n)(t.Y36(d.z),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["configurator-pin-configurator","pinList",""]],hostVars:2,hostBindings:function(i,o){2&i&&t.ekj("mat-elevation-z8",o.shadow)},inputs:{pinList:"pinList",options:"options"},attrs:w,decls:9,vars:5,consts:[[1,"title__wrapper"],[1,"title__main"],[3,"cursor","click",4,"ngIf"],[1,"title"],["class","subtitle",4,"ngIf"],[1,"wrapper"],["class","pins",4,"ngIf"],["class","options",4,"ngIf"],[3,"click"],[1,"subtitle"],[1,"pins"],["mat-button","",3,"click",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[1,"button"],[1,"button__title"],[1,"arrow"],[1,"live-arrow"],[1,"live-arrow","hide-arrow"],[1,"options"],[3,"optionsList","init","changePin"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,A,2,2,"mat-icon",2),t.TgZ(3,"span",3),t._uU(4),t.qZA()(),t.YNc(5,z,2,1,"div",4),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,N,2,1,"div",6),t.YNc(8,F,2,2,"div",7),t.qZA()),2&i&&(t.xp6(2),t.Q6J("ngIf",o.selected),t.xp6(2),t.hij(" ",o.options.title," "),t.xp6(1),t.Q6J("ngIf",o.selected),t.xp6(2),t.Q6J("ngIf",!o.selected),t.xp6(1),t.Q6J("ngIf",o.selected))},dependencies:[u.sg,u.O5,g.Hw,C.lW,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px;border-radius:4px}[_nghost-%COMP%]   .title__wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:8px;flex-direction:column;width:100%}[_nghost-%COMP%]   .title__wrapper[_ngcontent-%COMP%]   .title__main[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .title__wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;flex-grow:1;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover   .live-arrow[_ngcontent-%COMP%]{opacity:1;animation:1s _ngcontent-%COMP%_arrow infinite ease-in-out}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover   .live-arrow.hide-arrow[_ngcontent-%COMP%]{animation:1s .5s _ngcontent-%COMP%_arrow infinite ease-in-out;opacity:1}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button__title[_ngcontent-%COMP%]{flex-grow:1;text-align:left}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   .live-arrow[_ngcontent-%COMP%]{transform:translate(10px)}[_nghost-%COMP%]   .pins[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]   .live-arrow.hide-arrow[_ngcontent-%COMP%]{position:absolute;right:0;opacity:0}@keyframes _ngcontent-%COMP%_arrow{0%{transform:translate(10px)}15%{opacity:0;transform:translate(12px)}15.1%{transform:translate(0);opacity:0}65%{opacity:1}to{transform:translate(10px)}}[_nghost-%COMP%]     .mdc-button__label{width:100%}"],changeDetection:0}),c})()},7065:(y,f,s)=>{s.d(f,{V:()=>a});var _=s(7328),e=s(5879);let a=(()=>{var t;class d{constructor(){this.store$=new _.t(1)}select(g){this.store$.next(g)}get selectObserver(){return this.store$.asObservable()}}return(t=d).\u0275fac=function(g){return new(g||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),d})()}}]);